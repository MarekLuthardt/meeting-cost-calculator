<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="description" content="Lightweight meeting cost calculator">
    <meta name="keywords" content="meeting, cost, calculator, attendees, hourly rate">
    <meta name="author" content="Marek Luthardt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Meeting Cost Calculator</title>
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto%20Condensed">
    
    <style type="text/css">
    body {
        background-color: #999999;
    }
    #costs, #start_stop, #attendees {
        margin: 20px;
        padding: 20px;
        border: 1px solid black;
        text-align: center;
        font-family: 'Roboto Condensed'; 
        font-size: 150%;
        background-color: white;
    }
    #costs {
        font-size: 800%;
    }
    .plusminus, #startstop {
        background-color:#ff6600;
        -moz-border-radius:42px;
        -webkit-border-radius:42px;
        border-radius:42px;
        display:inline-block;
        cursor:pointer;
        color:#ffffff;
        font-family: 'Roboto Condensed';
        text-decoration:none;
        text-shadow:0px 1px 0px #999999;
    }
    .plusminus {
        border:1px solid #f06000;
        font-size: 110%; 
        padding:5px 10px;
        min-width: 3em;
    }
    #startstop {
        border:1px solid #000000;
        font-size: 150%; 
        padding:15px 20px;
        min-width: 20em;
    }
    </style>
  </head>
  <body>
    <div id="costs"><span id="val">0.00</span>&nbsp;â‚¬</div>

    <div id="start_stop">
        <button id="startstop">Start</button>
    </div>

    <div id="attendees">
        <button id="a_sub" class="plusminus">-</button>&nbsp;<span id="current_attendees">3</span>&nbsp;<button id="a_add" class="plusminus">+</button> 
        attendees with a rate of 
        <button id="cph_sub" class="plusminus">-</button>&nbsp;<span id="cph">45</span>&nbsp;<button id="cph_add" class="plusminus">+</button>
        EUR per hour.
    </div>

    <script>
    Number.prototype.formatMoney = function(c, d, t){
    var n = this, 
        c = isNaN(c = Math.abs(c)) ? 2 : c, 
        d = d == undefined ? "." : d, 
        t = t == undefined ? "," : t, 
        s = n < 0 ? "-" : "", 
        i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + "", 
        j = (j = i.length) > 3 ? j % 3 : 0;
       return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
     };
    
    var interval_id = 0;
    var refresh_int = 1;
    
    function get_attendees() {
        return parseInt($('#current_attendees').html(),10);
    }
    function set_attendees(n) {
        $('#current_attendees').html(n);
    }
    function get_cph() {
        return parseInt($('#cph').html(),10);
    }
    function set_cph(i) {
        return $('#cph').html(i);
    }
    function is_running() {
        return ($('#startstop').html() !== 'Start');
    }
    
    function start() {
        interval_id = setInterval(function(){ 
            var to_add = (get_cph() / 3600) * refresh_int * get_attendees();
            var costs  = parseFloat($('#val').html()) + to_add;
            $('#val').text(costs.formatMoney(2, '.', ','));
        }, refresh_int * 1000);
        $('#startstop').css("background-color", "#990000").text('Stop');
    }
    
    function stop() {
        clearInterval(interval_id);
        $('#startstop').css("background-color", "#009900").text('Start');
    }
    
    $(document).ready(function(){
        $('#a_add').click(function(){
            set_attendees(get_attendees() + 1);
        });
        $('#a_sub').click(function(){
            if (get_attendees() > 2) {
                set_attendees(get_attendees() - 1);
            }
        });
        $('#cph_sub').click(function(){
            if (get_cph() > 30) {
                set_cph(get_cph() - 5);
            }
        });
        $('#cph_add').click(function(){
            if (get_cph() < 100) {
                set_cph(get_cph() + 5);
            }
        });
        $('#startstop').css("background-color", "#009900").click(function(){
            if (is_running()) {
                stop();
            } else {
                start();
            }
        });
    });
    </script>
  </body>
</html>
