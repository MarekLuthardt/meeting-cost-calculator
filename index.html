<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="description" content="Lightweight meeting cost calculator">
    <meta name="keywords" content="meeting, cost, calculator, attendees, hourly rate">
    <meta name="author" content="Marek Luthardt">
    <meta name="viewport" content="width=90%, initial-scale=1.0">
    
    <title>Meeting Cost Calculator</title>
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto%20Condensed">
    
    <style type="text/css">
    body {
      background-color: #999999;
    }
      
    #frame {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: center;
      align-items: normal;
      align-content: center;
    } 

    .box {
      flex-grow: 0;
      flex-shrink: 1;
      flex-basis: auto;
      align-self: auto;
      order: 0;
      border-top: 1rem solid black !important;
      text-align: center;
      border: 0.1em solid black;
      border-radius: 0.5em;
      color: black;
      margin: 1em;
      padding: 1em;
      font-size: 1.5em;
      font-family: 'Roboto Condensed'; 
      box-shadow: 0 0 1em #333333;
    }  
      
    #mainbox {
      background-color: white;
      min-width: 20em;
    }  

    #settings {
      background-color: white;
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
      row-gap: 1em;
      padding: 1.5em;
    }
      
    #settings .label {
      margin-bottom: 0.2em;
    }
      
    .setting_figure {
      min-width: 2em;
      display: inline-block;
    }  
      
    #costs {
      margin: 0.1em;
      font-size: 5em;
    }

    .plusminus {
      border-radius: 5em;
      display: inline-block;
      cursor: pointer;
      font-family: 'Roboto Condensed';
      text-decoration: none;
      background-color: #BBBBBB;
      border:0.1em solid #999999;
      font-size: 1.1em; 
      min-width: 1.5em;
      color: black;
    }
    
    #startstop {
      font-size: 150%; 
      padding:0.5em 1.5em;
      color: #ffffff;
      border-radius: 5em;
      display: inline-block;
      cursor: pointer;
      font-family: 'Roboto Condensed';
      text-decoration: none;
      min-width: 5em;
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
      
    .running {
      border: 0.2em solid #660000;
      background-color: #990000;
      box-shadow: 0 0 0.5em #990000;
    }
      
    .stopped {
      border: 0.2em solid green;  
      background-color: #009900;      
      box-shadow: 0 0 0.5em #009900;
    }
    </style>
  </head>
  
  <body>
    <div id="frame">
      <div class="box" id="mainbox">
        <div id="costs"><span id="val">0.00</span>&nbsp;â‚¬</div>
        <button id="startstop" class="stopped">Start</button>
      </div>

      <div class="box" id="settings">
        <div id="attendees">
          <p class="label">Attendees</p>
          <button id="a_sub" class="plusminus">-</button>&nbsp;<span class="setting_figure" id="current_attendees">3</span>&nbsp;<button id="a_add" class="plusminus">+</button> 
        </div>
        <div id="hourlyrate"> 
          <p class="label">Hourly rate</p>
          <button id="cph_sub" class="plusminus">-</button>&nbsp;<span class="setting_figure" id="cph">45</span>&nbsp;<button id="cph_add" class="plusminus">+</button>
        </div>  
        <div id="currencies">
          <button id="EUR" class="plusminus">&euro;</button>
          <button id="USD" class="plusminus">&dollar;</button>          
          <button id="GBP" class="plusminus">&pound;</button>
          <button id="CHF" class="plusminus">CHF</button> 
        </div>  
      </div>  
    </div> 

    <script>
    Number.prototype.formatMoney = function() {
      return (parseFloat(this, 10).toFixed(this < 10 ? 2 : 0).toString());
    };
    
    var interval_id = 0;
    var refresh_int = 1;
    
    function get_attendees() {
        return parseInt($('#current_attendees').html(),10);
    }
    function set_attendees(n) {
        $('#current_attendees').html(n);
    }
    function get_cph() {
        return parseInt($('#cph').html(),10);
    }
    function set_cph(i) {
        return $('#cph').html(i);
    }
    function is_running() {
        return ($('#startstop').html() !== 'Start');
    }
    
    function start() {
        interval_id = setInterval(function(){ 
            var to_add = (get_cph() / 3600) * refresh_int * get_attendees();
            var costs  = parseFloat($('#val').html()) + to_add;
            $('#val').text(costs.formatMoney());
        }, refresh_int * 1000);
        $('#startstop').removeClass("stopped").addClass("running").text('Stop');
    }
    
    function stop() {
        clearInterval(interval_id);
        $('#startstop').removeClass("running").addClass("stopped").text('Start');
    }
    
    $(document).ready(function(){
        $('#a_add').click(function(){
            set_attendees(get_attendees() + 1);
        });
        $('#a_sub').click(function(){
            if (get_attendees() > 2) {
                set_attendees(get_attendees() - 1);
            }
        });
        $('#cph_sub').click(function(){
            if (get_cph() > 30) {
                set_cph(get_cph() - 5);
            }
        });
        $('#cph_add').click(function(){
            if (get_cph() < 500) {
                set_cph(get_cph() + 5);
            }
        });
        $('#startstop').click(function(){
            if (is_running()) {
                stop();
            } else {
                start();
            }
        });
    });
    </script>
  </body>
</html>
