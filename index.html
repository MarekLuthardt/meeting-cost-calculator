<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="description" content="Lightweight meeting cost calculator">
    <meta name="keywords" content="meeting, cost, calculator, attendees, hourly rate">
    <meta name="author" content="Marek Luthardt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Meeting Cost Calculator</title>
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto%20Condensed">
    
    <style type="text/css">
    body {
        background-color: #999999;
    }
    #costs, #start_stop, #attendees {
        margin: 20px;
        padding: 20px;
        border: 1px solid black;
        text-align: center;
        font-family: 'Roboto Condensed'; 
        font-size: 150%;
        background-color: white;
    }
    #costs {
        font-size: 800%;
    }
    .plusminus, #startstop {
        border-radius: 5em;
        display: inline-block;
        cursor: pointer;
        font-family: 'Roboto Condensed';
        text-decoration: none;
    }
    .plusminus {
        background-color: #BBBBBB;
        border:1px solid black;
        font-size: 110%; 
        min-width: 1.5em;
        color: black;
    }
    #startstop {
        background-color: #009900;
        border:5px solid #000000;
        font-size: 150%; 
        padding:0.5em 1.5em;
        color: #ffffff;
    }
    </style>
  </head>
  
  <body>
    <div id="costs"><span id="val">0.00</span>&nbsp;â‚¬</div>

    <div id="start_stop">
        <button id="startstop">Start</button>
    </div>

    <div id="attendees">
        <button id="a_sub" class="plusminus">-</button>&nbsp;<span id="current_attendees">3</span>&nbsp;<button id="a_add" class="plusminus">+</button> 
        attendees with a rate of 
        <button id="cph_sub" class="plusminus">-</button>&nbsp;<span id="cph">45</span>&nbsp;<button id="cph_add" class="plusminus">+</button>
        EUR per hour.
    </div>

    <script>
    Number.prototype.formatMoney = function(c) {
      return (parseFloat(this, 10).toFixed(this < 10 ? 2 : 0).toString());
    };
    
    var interval_id = 0;
    var refresh_int = 1;
    
    function get_attendees() {
        return parseInt($('#current_attendees').html(),10);
    }
    function set_attendees(n) {
        $('#current_attendees').html(n);
    }
    function get_cph() {
        return parseInt($('#cph').html(),10);
    }
    function set_cph(i) {
        return $('#cph').html(i);
    }
    function is_running() {
        return ($('#startstop').html() !== 'Start');
    }
    
    function start() {
        interval_id = setInterval(function(){ 
            var to_add = (get_cph() / 3600) * refresh_int * get_attendees();
            var costs  = parseFloat($('#val').html()) + to_add;
            if (costs > 9.99) {
                $('#val').text(costs.formatMoney(0));
            } else {
                $('#val').text(costs.formatMoney(2));
            }
        }, refresh_int * 1000);
        $('#startstop').css("background-color", "#990000").text('Stop');
    }
    
    function stop() {
        clearInterval(interval_id);
        $('#startstop').css("background-color", "#009900").text('Start');
    }
    
    $(document).ready(function(){
        $('#a_add').click(function(){
            set_attendees(get_attendees() + 1);
        });
        $('#a_sub').click(function(){
            if (get_attendees() > 2) {
                set_attendees(get_attendees() - 1);
            }
        });
        $('#cph_sub').click(function(){
            if (get_cph() > 30) {
                set_cph(get_cph() - 5);
            }
        });
        $('#cph_add').click(function(){
            if (get_cph() < 100) {
                set_cph(get_cph() + 5);
            }
        });
        $('#startstop').css("background-color", "#009900").click(function(){
            if (is_running()) {
                stop();
            } else {
                start();
            }
        });
    });
    </script>
  </body>
</html>
